<template>
  <div class="w-full">
    <legend class="font-firma-semibold md:text-2xl text-xl">Overview</legend>
    <div class="mt-4 grid grid-cols-12 gap-x-4 md:gap-x-8 md:gap-y-0 gap-y-4">
      <div
        class="
          md:col-span-4
          col-span-12
          border border-gray-200
          md:h-32
          rounded-2xl
          flex
          items-center
          justify-start
          py-4
          pl-8
          gap-x-8
        "
      >
        <svg
          class="hidden xl:block"
          width="60"
          height="60"
          viewBox="0 0 64 64"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="32" cy="32" r="32" fill="#EBF4FF" />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M44.6987 29.0038C43.8466 23.7592 39.3919 19.8576 34.0808 19.704C33.8283 19.6941 33.5822 19.785 33.3968 19.9567C33.2114 20.1284 33.1018 20.3668 33.0923 20.6193V20.7047L33.6903 29.6506C33.7295 30.2528 34.2472 30.7106 34.8497 30.6758L43.82 30.0777C44.0727 30.059 44.3076 29.9403 44.4725 29.7479C44.6375 29.5555 44.7189 29.3052 44.6987 29.0526V29.0038Z"
            fill="#007AFF"
            stroke="#007AFF"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M27.8688 25.0252C28.4395 24.8932 29.0234 25.1852 29.2601 25.7208C29.3222 25.8468 29.3595 25.9836 29.37 26.1236C29.492 27.8566 29.7483 31.6522 29.8948 33.7025C29.9198 34.0719 30.0909 34.416 30.3704 34.6588C30.6498 34.9016 31.0145 35.023 31.3837 34.9962L38.9138 34.5324C39.25 34.5122 39.5796 34.6318 39.8246 34.8629C40.0695 35.094 40.2081 35.4161 40.2075 35.7529C39.9024 40.3 36.6354 44.1014 32.1858 45.0868C27.7362 46.0721 23.1697 44.0054 20.9733 40.0122C20.3177 38.8629 19.9025 37.5924 19.7529 36.2777C19.689 35.8742 19.6644 35.4655 19.6797 35.0572C19.6926 30.2012 23.103 26.0171 27.8566 25.0252"
            fill="#007AFF"
          />
          <path
            d="M27.8688 25.0252C28.4395 24.8932 29.0234 25.1852 29.2601 25.7208C29.3222 25.8468 29.3595 25.9836 29.37 26.1236C29.492 27.8566 29.7483 31.6522 29.8948 33.7025C29.9198 34.0719 30.0909 34.416 30.3704 34.6588C30.6498 34.9016 31.0145 35.023 31.3837 34.9962V34.9962L38.9138 34.5324C39.25 34.5122 39.5796 34.6318 39.8246 34.8629C40.0695 35.094 40.2081 35.4161 40.2075 35.7529V35.7529C39.9024 40.3 36.6354 44.1014 32.1858 45.0868C27.7362 46.0721 23.1697 44.0054 20.9733 40.0122C20.3177 38.8629 19.9025 37.5924 19.7529 36.2777C19.689 35.8742 19.6644 35.4655 19.6797 35.0572C19.6926 30.2012 23.103 26.0171 27.8566 25.0252"
            stroke="#007AFF"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <div class="grid">
          <p class="font-firma-light text-sm">Total loan volume</p>
          <p class="text-3xl font-firma-semibold">
            <sup class="text-sm font-firma-semibold">NGN</sup> 130,000,000
          </p>
        </div>
      </div>
      <div
        class="
          md:col-span-4
          col-span-12
          border border-gray-200
          md:h-32
          rounded-2xl
          flex
          items-center
          justify-start
          py-4
          pl-8
          gap-x-8
        "
      >
        <svg
          class="hidden xl:block"
          width="60"
          height="60"
          viewBox="0 0 64 64"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="32" cy="32" r="32" fill="#EBFAF4" />
          <ellipse
            cx="30.9532"
            cy="25.7041"
            rx="6.58307"
            ry="6.37071"
            fill="#02AA65"
            stroke="#02AA65"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M20.5113 40.9352C20.5095 40.4873 20.613 40.0449 20.8139 39.6415C21.4445 38.4211 23.2227 37.7742 24.6982 37.4813C25.7623 37.2615 26.8412 37.1147 27.9267 37.042C29.9364 36.8711 31.9577 36.8711 33.9674 37.042C35.0529 37.1156 36.1316 37.2624 37.1959 37.4813C38.6714 37.7742 40.4496 38.36 41.0802 39.6415C41.4843 40.4639 41.4843 41.4186 41.0802 42.241C40.4496 43.5225 38.6714 44.1083 37.1959 44.389C36.133 44.6179 35.0538 44.7688 33.9674 44.8406C32.3317 44.9748 30.6883 44.9992 29.0491 44.9138C28.6707 44.9138 28.305 44.9138 27.9267 44.8406C26.8444 44.7697 25.7693 44.6187 24.7108 44.389C23.2227 44.1083 21.4571 43.5225 20.8139 42.241C20.614 41.8329 20.5106 41.3868 20.5113 40.9352Z"
            fill="#02AA65"
            stroke="#02AA65"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>

        <div class="grid">
          <p class="font-firma-light text-sm">
            Total Number of Loan Applications
          </p>
          <p class="text-3xl font-firma-semibold">
            <sup class="text-sm font-firma-semibold">No.</sup> 765,901
          </p>
        </div>
      </div>
      <div
        class="
          md:col-span-4
          col-span-12
          border border-gray-200
          md:h-32
          rounded-2xl
          flex
          items-center
          justify-start
          py-4
          pl-8
          gap-x-8
        "
      >
        <svg
          class="hidden xl:block"
          width="60"
          height="60"
          viewBox="0 0 64 64"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="32" cy="32" r="32" fill="#FEF7EE" />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M36.8193 26.8281L29.7395 34.4303L21.4508 28.9886C20.3647 28.2754 20.5848 26.516 21.8084 26.1372L41.3777 20.0632C42.4906 19.7197 43.5195 20.8326 43.1863 22.0252L37.3799 42.8776C37.0163 44.1825 35.3853 44.4085 34.7261 43.2434L29.7395 34.4303"
            fill="#D5AD7A"
          />
          <path
            d="M36.8193 26.8281L29.7395 34.4303L21.4508 28.9886C20.3647 28.2754 20.5848 26.516 21.8084 26.1372L41.3777 20.0632C42.4906 19.7197 43.5195 20.8326 43.1863 22.0252L37.3799 42.8776C37.0163 44.1825 35.3853 44.4085 34.7261 43.2434L29.7395 34.4303"
            stroke="#FEF7EE"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>

        <div class="grid">
          <p class="font-firma-light text-sm">Total Loan Amount Disbursed</p>
          <p class="text-3xl font-firma-semibold">
            <sup class="text-sm font-firma-semibold">NGN</sup> 130,000,000
          </p>
        </div>
      </div>
    </div>
    <legend class="mt-16 font-firma-semibold md:text-2xl text-xl">
      Activity
    </legend>
    <div class="mt-4 grid grid-cols-12 gap-8">
      <div
        class="
          md:col-span-8
          col-span-12
          border border-gray-200
          h-32
          rounded-2xl
          md:px-8 md:py-4
          p-4
        "
      >
        <div
          class="pb-3 border-b border-gray-200 flex items-end justify-between"
        >
          <h4 class="font-firma-medium">Loan application</h4>
          <div class="md:flex hidden flex-row font-light items-center text-xs">
            <v-date-picker
              v-model="loanApplication.dateRange"
              mode="date"
              :masks="loanApplication.masks"
              color="blue"
              is-range
              class="inline-block h-full"
              trim-weeks
            >
              <template #default="{ inputValue, togglePopover }">
                <a
                  class="
                    flex
                    items-center
                    cursor-pointer
                    px-3
                    py-2
                    border-l border-t border-b border-theme-gray-1
                    cursor-pointer
                    hover:bg-theme-dark
                    rounded-l-lg
                  "
                  :class="[
                    loanApplication.dateFilter === 'custom'
                      ? 'bg-custom-gray-lighter hover:bg-custom-gray-lighter text-custom-black'
                      : 'hover:bg-custom-dark-lighter-2',
                  ]"
                  @click.prevent="
                    () => {
                      loanApplication.dateFilter = 'custom'
                      togglePopover()
                    }
                  "
                >
                  <span
                    v-if="!inputValue.start"
                    class="font-firma-light text-xs"
                    >Custom</span
                  >
                  <div
                    v-if="inputValue.start"
                    class="flex gap-x-1 text-xs font-firma-light"
                  >
                    <h6 class="text-xs font-firma-light">
                      {{ inputValue.start }}
                    </h6>
                    to
                    <h6 class="text-xs font-firma-light">
                      {{ inputValue.end }}
                    </h6>
                  </div>
                </a>
                <input
                  :value="inputValue"
                  class="
                    bg-white
                    hidden
                    text-gray-700
                    w-full
                    py-1
                    px-2
                    appearance-none
                    border
                    rounded-r
                    focus:outline-none focus:border-blue-500
                  "
                  readonly
                />
              </template>
            </v-date-picker>
            <a
              v-for="(r, i) in loanApplication.range"
              :key="i"
              class="
                px-3
                py-2
                border-r border-t border-b border-theme-gray-1
                cursor-pointer
                font-firma-light
                text-xs
              "
              :class="[
                i === loanApplication.range.length - 1 ? 'rounded-r-lg' : '',
                r === loanApplication.dateFilter
                  ? 'bg-custom-gray-lighter hover:bg-custom-gray-lighter text-custom-black'
                  : 'hover:bg-custom-dark-lighter-2',
              ]"
              @click.prevent="() => selectDateFilter(r)"
            >
              {{ r }}
            </a>
          </div>
        </div>
      </div>
      <div
        class="
          md:col-span-4
          col-span-12
          border border-gray-200
          h-32
          rounded-2xl
          p-4
          gap-x-8
        "
      >
        <div
          class="
            pb-3
            border-b border-gray-200
            flex
            items-center
            justify-between
          "
        >
          <h4 class="font-firma-medium flex">
            Approved loans&nbsp;<span class="hidden md:hidden"
              >by products</span
            >
          </h4>
          <select
            v-model="selectedLoanProducts.product"
            class="
              py-2
              border border-gray-200
              appearance-none
              rounded-lg
              font-firma-light
              text-xs
            "
          >
            <option :value="null">Choose</option>
            <option
              v-for="(p, i) in selectedLoanProducts.range"
              :key="i"
              :value="p"
            >
              {{ p }}
            </option>
          </select>
        </div>
      </div>
      <div
        class="
          md:col-span-8
          col-span-12
          border border-gray-200
          h-auto
          rounded-2xl
          md:px-8 md:py-4
          p-4
        "
      >
        <div
          class="
            pb-3
            border-b border-gray-200
            flex flex-row
            md:items-end
            items-center
            justify-between
          "
        >
          <h4 class="font-firma-medium">Loan requests</h4>
          <div class="flex items-center gap-x-4">
            <label class="font-firma-light text-sm hidden md:hidden"
              >Sort by:</label
            >
            <select
              v-model="selectedLoanProducts.product"
              class="
                py-2
                border border-gray-200
                appearance-none
                rounded-lg
                font-firma-light
                text-xs
              "
            >
              <option :value="null">Choose</option>
              <option
                v-for="(p, i) in selectedLoanProducts.range"
                :key="i"
                :value="p"
              >
                {{ p }}
              </option>
            </select>
          </div>
        </div>

        <div class="mt-4 border-b border-gray-200 pb-2">
          <div class="grid grid-cols-12 w-full">
            <label class="md:col-span-4 col-span-8 text-sm font-firma-medium"
              >Borrower's name</label
            >
            <label
              class="md:col-span-2 col-span-4 text-sm font-firma-medium flex"
              >Amount
              <span class="text-sm font-firma-medium md:block hidden">
                &nbsp;requested</span
              ></label
            >
            <label
              class="hidden md:block md:col-span-2 text-sm font-firma-medium"
              >Type of loan</label
            >
            <label
              class="hidden md:block md:col-span-2 text-sm font-firma-medium"
              >Purpose</label
            >
            <label
              class="hidden md:block md:col-span-1 text-sm font-firma-medium"
            ></label>
          </div>
        </div>
        <div
          v-for="(n, i) in 10"
          :key="i"
          class="mt-4 pt-2 pb-3"
          :class="[n === 10 ? '' : 'border-b border-gray-200']"
        >
          <div class="grid grid-cols-12 w-full items-center">
            <div
              class="
                md:col-span-4
                col-span-8
                flex
                gap-x-4
                items-center
                truncate
              "
            >
              <div
                class="
                  bg-custom-blue-light
                  rounded-full
                  text-sm text-center
                  h-10
                  w-10
                  items-center
                  justify-center
                  pt-0.5
                  hidden
                  md:flex
                "
              >
                <span class="font-firma-semibold text-custom-blue-2 text-xs"
                  >OC</span
                >
              </div>
              <div class="grid gap-y-0">
                <h3 class="text-sm font-firma-medium hidden md:block">
                  Chike Ozulumba
                </h3>
                <nuxt-link
                  to="/loans/"
                  class="
                    text-sm
                    font-firma-medium
                    md:hidden
                    underline
                    text-custom-blue-2
                  "
                >
                  Chike Ozulumba
                </nuxt-link>
                <h3 class="text-sm font-firma-light underline hidden md:block">
                  LAID-12345678
                </h3>
              </div>
            </div>
            <label class="col-span-2 text-sm font-firma-light"
              ><span class="md:block hidden text-xs">NGN</span>
              300,000.00</label
            >
            <label
              class="md:col-span-2 text-sm hidden md:block font-firma-light"
              >Individual</label
            >
            <label
              class="md:col-span-2 text-sm hidden md:block font-firma-light"
              >House Rent</label
            >
            <label
              class="
                col-span-2
                underline
                text-sm
                font-firma-light
                text-custom-blue-2
                hidden
                md:block
              "
            >
              View details
            </label>
          </div>
        </div>
      </div>
      <div
        class="
          md:col-span-4
          col-span-12
          border border-gray-200
          h-32
          rounded-2xl
          p-4
          gap-x-8
        "
      >
        <div
          class="
            pb-3
            border-b border-gray-200
            flex
            items-center
            justify-between
          "
        >
          <h4 class="font-firma-medium text-md">
            Industry&nbsp;<span class="hidden md:hidden text-md"
              >of borrowers</span
            >
          </h4>
          <div class="flex items-center gap-x-4">
            <label class="font-firma-light text-sm hidden">Sort by:</label>
            <select
              v-model="selectedLoanProducts.product"
              class="
                py-2
                border border-gray-200
                appearance-none
                rounded-lg
                font-firma-light
                text-xs
              "
            >
              <option :value="null">Choose</option>
              <option
                v-for="(p, i) in selectedLoanProducts.range"
                :key="i"
                :value="p"
              >
                {{ p }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import numeral from 'numeral'
export default {
  name: 'Home',
  components: {},
  layout: 'authenticated',
  data() {
    return {
      loanApplication: {
        range: ['7D', '30D', '3M', '6M', '9M'],
        date: new Date(),
        dateRange: {
          start: new Date(),
          end: null,
        },
        masks: {
          input: 'DD-MM-YY',
        },
        dateFilter: '7D',
      },
      selectedLoanProducts: {
        product: null,
        range: ['Individual', 'SME', 'Payday', 'Car loan'],
      },
    }
  },
  computed: {
    numberFormatter() {
      return numeral
    },
  },
  methods: {
    selectDateFilter(r) {
      this.loanApplication.dateFilter = r
      this.loanApplication.dateRange = {
        start: new Date(),
        end: null,
      }
    },
  },
}
</script>
